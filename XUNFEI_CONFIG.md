# è®¯é£è¯­éŸ³æœåŠ¡é…ç½®è¯´æ˜

## ğŸ“‹ å½“å‰é…ç½®çŠ¶æ€

âœ… **å·²å®Œæˆé…ç½®** - å¯ä»¥ç›´æ¥ä½¿ç”¨

## ğŸ”‘ é…ç½®ä¿¡æ¯

æ‰€æœ‰é…ç½®å·²å†™å…¥ `config.yaml`ï¼Œæ— éœ€é¢å¤–çš„ç¯å¢ƒå˜é‡é…ç½®ã€‚

### å½“å‰é…ç½®å†…å®¹

```yaml
xunfei:
  # åº”ç”¨ID
  app_id: "4f4d5a39"
  
  # APIå¯†é’¥
  api_key: "c3707fb39206d788d80ae13fa1ce82bc"
  
  # APIå¯†é’¥
  api_secret: "NjAzMmY5NDExMzBkODM4MjI0ODExOTA4"
  
  # æœåŠ¡ç«¯ç‚¹é…ç½®
  endpoints:
    # è¶…æ‹ŸäººTTSç«¯ç‚¹
    super_tts: "wss://cbm01.cn-huabei-1.xf-yun.com/v1/private/mcd9m97e6"
    asr: "wss://iat-api.xfyun.cn/v2/iat"
    spark: "wss://spark-api.xf-yun.com/v3.5/chat"
  
  # é…é¢é™åˆ¶ (æ¯ç”¨æˆ·æ¯å¤©)
  quota:
    tts: 100      # è¯­éŸ³åˆæˆ
    asr: 100      # è¯­éŸ³è¯†åˆ«
    spark: 50     # æ˜Ÿç«å¤§æ¨¡å‹
  
  # é»˜è®¤é…ç½®
  defaults:
    tts:
      voice: "x5_lingfeiyi_flow"   # x5ç³»åˆ—å‘éŸ³äºº
      speed: 50
      volume: 50
      pitch: 50
      audio_format: "lame"         # MP3æ ¼å¼
      oral_level: "mid"            # å£è¯­åŒ–ç­‰çº§: high/mid/low
```

## ğŸ“¦ æœåŠ¡åŠŸèƒ½

### 1. è¶…æ‹Ÿäººè¯­éŸ³åˆæˆ (TTS)

- **ä»·æ ¼**: 2å…ƒ/ä¸‡å­—ç¬¦
- **ç‰¹ç‚¹**: è¶…æ‹Ÿäººåˆæˆï¼ŒéŸ³è´¨è‡ªç„¶æµç•…
- **æ”¯æŒ**: å…‹éš†å£°éŸ³ï¼ˆ5å…ƒ/ä¸ªï¼‰
- **è¶…é•¿æ–‡æœ¬**: æ”¯æŒ10ä¸‡å­—ï¼ˆ3å…ƒ/ä¸‡å­—ç¬¦ï¼‰

### 2. å¯ç”¨éŸ³è‰² (x5ç³»åˆ—)

| éŸ³è‰²åç§° | éŸ³è‰²å€¼ | æ€§åˆ« | ç‰¹ç‚¹ |
|---------|--------|------|------|
| å‡Œé£æ˜“_æµç•…ç‰ˆ | x5_lingfeiyi_flow | ç”· | æµç•…è‡ªç„¶ |
| å‡Œé£æ˜“_æƒ…æ„Ÿç‰ˆ | x5_lingfeiyi | ç”· | å¯Œæœ‰æƒ…æ„Ÿ |
| å°ç ”_æµç•…ç‰ˆ | x5_xiaoyan_flow | å¥³ | æµç•…è‡ªç„¶ |
| å°ç ”_æƒ…æ„Ÿç‰ˆ | x5_xiaoyan | å¥³ | å¯Œæœ‰æƒ…æ„Ÿ |
| å°é›¨_æµç•…ç‰ˆ | x5_xiaoyu_flow | å¥³ | æ¸…æ–°æ¸©æŸ” |
| å°é›¨_æƒ…æ„Ÿç‰ˆ | x5_xiaoyu | å¥³ | æ´»æ³¼ç”ŸåŠ¨ |
| æ™“è¾°_æµç•…ç‰ˆ | x5_xiaochen_flow | å¥³ | çŸ¥æ€§ä¼˜é›… |
| æ™“è¾°_æƒ…æ„Ÿç‰ˆ | x5_xiaochen | å¥³ | æ¸©æš–äº²åˆ‡ |

**æ³¨æ„**: éœ€è¦åœ¨è®¯é£æ§åˆ¶å°å¼€é€šå¯¹åº”å‘éŸ³äººçš„æƒé™

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### 1. å¯åŠ¨æœåŠ¡

```bash
python main.py
```

### 2. æµ‹è¯•TTSæ¥å£

```bash
curl -X POST http://localhost:8000/api/xunfei/tts/auth \
  -H "Content-Type: application/json" \
  -d '{
    "text": "ä½ å¥½ï¼Œè¿™æ˜¯è®¯é£è¶…æ‹Ÿäººè¯­éŸ³åˆæˆæµ‹è¯•",
    "voice": "x5_lingfeiyi_flow",
    "speed": 50,
    "volume": 50,
    "pitch": 50,
    "oral_level": "mid"
  }'
```

### 3. æŸ¥çœ‹é…é¢

```bash
curl http://localhost:8000/api/xunfei/quota?service=tts
```

### 4. è·å–éŸ³è‰²åˆ—è¡¨

```bash
curl http://localhost:8000/api/xunfei/voices
```

## ğŸ“– æ–‡æ¡£é“¾æ¥

- [è®¯é£APIæ¥å£æ–‡æ¡£](docs/api/xunfei_api.md)
- [Flutterå‰ç«¯é›†æˆæŒ‡å—](docs/guides/xunfei_flutter_guide.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/guides/xunfei_quick_start.md)
- [è®¯é£å®˜æ–¹æ–‡æ¡£](https://www.xfyun.cn/doc/spark/super%20smart-tts.html)

## âš™ï¸ é…ç½®è¯´æ˜

### é…é¢è°ƒæ•´

å¦‚éœ€è°ƒæ•´æ¯æ—¥é…é¢ï¼Œä¿®æ”¹ `config.yaml`:

```yaml
xunfei:
  quota:
    tts: 200  # ä¿®æ”¹ä¸º200æ¬¡/å¤©
    asr: 200
    spark: 100
```

### é»˜è®¤å‚æ•°è°ƒæ•´

ä¿®æ”¹é»˜è®¤çš„TTSå‚æ•°:

```yaml
xunfei:
  defaults:
    tts:
      voice: "x5_xiaoyan_flow"  # æ”¹ä¸ºå¥³å£°
      speed: 60                  # åŠ å¿«è¯­é€Ÿ
      oral_level: "high"         # æé«˜å£è¯­åŒ–ç¨‹åº¦
```

## ğŸ” å®‰å…¨è¯´æ˜

- âœ… æ‰€æœ‰å¯†é’¥é…ç½®åœ¨ `config.yaml` ä¸­
- âœ… ç”Ÿäº§ç¯å¢ƒå»ºè®®å°† `config.yaml` æ·»åŠ åˆ° `.gitignore`
- âœ… å¯ä»¥ä½¿ç”¨ `config.example.yaml` ä½œä¸ºæ¨¡æ¿
- âœ… å‰ç«¯ä¸ä¼šæ¥è§¦åˆ°ä»»ä½•å¯†é’¥ä¿¡æ¯

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **éŸ³è‰²æƒé™**: ä½¿ç”¨å‰éœ€åœ¨è®¯é£æ§åˆ¶å°å¼€é€šx5ç³»åˆ—å‘éŸ³äººæƒé™
2. **ç«¯ç‚¹URL**: è¶…æ‹ŸäººTTSç«¯ç‚¹æ˜¯ä¸“å±çš„ï¼Œæ¯ä¸ªåº”ç”¨ä¸åŒ
3. **é…é¢ç®¡ç†**: é»˜è®¤æ¯ç”¨æˆ·æ¯å¤©100æ¬¡TTSè°ƒç”¨
4. **éŸ³é¢‘æ ¼å¼**: æ¨èä½¿ç”¨ `lame` (MP3æ ¼å¼)
5. **å£è¯­åŒ–ç­‰çº§**: `mid` é€‚åˆå¤§å¤šæ•°åœºæ™¯

## âœ… å·²å®ŒæˆåŠŸèƒ½

- âœ… é€šç”¨TokenæœåŠ¡æ¶æ„
- âœ… è¶…æ‹ŸäººTTSé‰´æƒå’Œå‚æ•°ç”Ÿæˆ
- âœ… WebSocketç›´è¿æ”¯æŒ
- âœ… é…é¢ç®¡ç†
- âœ… éŸ³è‰²ç®¡ç†
- âœ… Flutteré›†æˆæ–‡æ¡£
- âœ… å®Œæ•´çš„APIæ–‡æ¡£

## ğŸ‰ å¼€å§‹ä½¿ç”¨

é…ç½®å·²å®Œæˆï¼Œå¯ä»¥ç›´æ¥å¯åŠ¨æœåŠ¡å¼€å§‹ä½¿ç”¨ï¼

```bash
python main.py
```

åç«¯APIåœ°å€: http://localhost:8000

æŸ¥çœ‹APIæ–‡æ¡£: http://localhost:8000/docs

