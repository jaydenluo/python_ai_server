# æ–‡ä»¶é‡ç»„è¯´æ˜ v2

## ğŸ“ é‡ç»„æ¦‚è¿°

å°†APIç›¸å…³æ–‡ä»¶ä» `app/api/` ç§»åŠ¨åˆ° `app/core/` ä¸‹ï¼Œå®ç°æ›´æ¸…æ™°çš„æ¶æ„åˆ†å±‚ã€‚

## ğŸ”„ ç§»åŠ¨çš„æ–‡ä»¶

### 1. è·¯ç”±ç›¸å…³æ–‡ä»¶
- **åŸä½ç½®**: `app/api/decorators/route_decorators.py`
- **æ–°ä½ç½®**: `app/core/routing/route_decorators.py`
- **è¯´æ˜**: è·¯ç”±è£…é¥°å™¨æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œåº”è¯¥æ”¾åœ¨coreæ¨¡å—

### 2. æ–‡æ¡£ç”Ÿæˆæ–‡ä»¶
- **åŸä½ç½®**: `app/api/docs/openapi_generator.py`
- **æ–°ä½ç½®**: `app/core/docs/openapi_generator.py`
- **è¯´æ˜**: æ–‡æ¡£ç”Ÿæˆæ˜¯æ¡†æ¶æ ¸å¿ƒåŠŸèƒ½

### 3. ä¸­é—´ä»¶æ–‡ä»¶
- **åŸä½ç½®**: `app/api/middleware/api_middleware.py`
- **æ–°ä½ç½®**: `app/core/middleware/api_middleware.py`
- **è¯´æ˜**: APIä¸­é—´ä»¶æ˜¯æ ¸å¿ƒä¸­é—´ä»¶åŠŸèƒ½

### 4. æ§åˆ¶å™¨åŸºç±»
- **åŸä½ç½®**: `app/api/controllers/base.py`
- **æ–°ä½ç½®**: `app/core/controllers/base_controller.py`
- **è¯´æ˜**: æ§åˆ¶å™¨åŸºç±»æ˜¯æ ¸å¿ƒç»„ä»¶

## ğŸ“‚ æ–°çš„ç›®å½•ç»“æ„

```
app/
â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¡†æ¶åŠŸèƒ½
â”‚   â”œâ”€â”€ routing/             # è·¯ç”±ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ route_decorators.py
â”‚   â”‚   â””â”€â”€ route_registry.py
â”‚   â”œâ”€â”€ docs/                # æ–‡æ¡£ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ openapi_generator.py
â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ logging.py
â”‚   â”‚   â”œâ”€â”€ rate_limit.py
â”‚   â”‚   â””â”€â”€ api_middleware.py
â”‚   â”œâ”€â”€ controllers/         # æ§åˆ¶å™¨åŸºç±»
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ base_controller.py
â”‚   â”œâ”€â”€ container/           # ä¾èµ–æ³¨å…¥
â”‚   â”œâ”€â”€ events/              # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ config/              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ cache/               # ç¼“å­˜ç³»ç»Ÿ
â”‚   â”œâ”€â”€ models/              # æ¨¡å‹åŸºç±»
â”‚   â”œâ”€â”€ mixins/              # æ··å…¥ç±»
â”‚   â”œâ”€â”€ orm/                 # ORMç³»ç»Ÿ
â”‚   â”œâ”€â”€ query_builder/       # æŸ¥è¯¢æ„å»ºå™¨
â”‚   â””â”€â”€ repositories/        # ä»“å‚¨å±‚
â””â”€â”€ api/                     # APIåº”ç”¨å±‚
    â””â”€â”€ controllers/         # å…·ä½“æ§åˆ¶å™¨å®ç°
        â”œâ”€â”€ admin/           # ç®¡ç†ç«¯æ§åˆ¶å™¨
        â”œâ”€â”€ api/             # APIæ§åˆ¶å™¨
        â””â”€â”€ web/             # Webæ§åˆ¶å™¨
```

## ğŸ¯ é‡ç»„ä¼˜åŠ¿

### 1. æ¸…æ™°çš„æ¶æ„åˆ†å±‚
- **coreæ¨¡å—**: æ¡†æ¶æ ¸å¿ƒåŠŸèƒ½ï¼Œå¯å¤ç”¨
- **apiæ¨¡å—**: åº”ç”¨å±‚å®ç°ï¼Œä¸šåŠ¡ç›¸å…³

### 2. æ›´å¥½çš„æ¨¡å—åŒ–
- æ ¸å¿ƒåŠŸèƒ½ç‹¬ç«‹ï¼Œæ˜“äºæµ‹è¯•
- åº”ç”¨å±‚ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘

### 3. ä¾¿äºç»´æŠ¤
- æ¡†æ¶åŠŸèƒ½é›†ä¸­ç®¡ç†
- å‡å°‘æ–‡ä»¶æŸ¥æ‰¾æ—¶é—´

## ğŸ“ å¯¼å…¥è·¯å¾„æ›´æ–°

### è·¯ç”±è£…é¥°å™¨
```python
# æ—§å¯¼å…¥
from app.api.decorators import get, post, put, delete

# æ–°å¯¼å…¥
from app.core.routing import get, post, put, delete
```

### æ–‡æ¡£ç”Ÿæˆ
```python
# æ—§å¯¼å…¥
from app.api.docs import OpenAPIGenerator

# æ–°å¯¼å…¥
from app.core.docs import OpenAPIGenerator
```

### ä¸­é—´ä»¶
```python
# æ—§å¯¼å…¥
from app.api.middleware import APIVersionMiddleware

# æ–°å¯¼å…¥
from app.core.middleware.api_middleware import APIVersionMiddleware
```

### æ§åˆ¶å™¨åŸºç±»
```python
# æ—§å¯¼å…¥
from app.api.controllers.base import BaseController

# æ–°å¯¼å…¥
from app.core.controllers import BaseController
```

## ğŸ”§ è¿ç§»æ­¥éª¤

1. **æ›´æ–°å¯¼å…¥è·¯å¾„**: ä¿®æ”¹æ‰€æœ‰å¼•ç”¨è¿™äº›æ–‡ä»¶çš„ä»£ç 
2. **æµ‹è¯•åŠŸèƒ½**: ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. **æ¸…ç†æ—§æ–‡ä»¶**: åˆ é™¤å·²ç§»åŠ¨çš„æ–‡ä»¶
4. **æ›´æ–°æ–‡æ¡£**: æ›´æ–°ç›¸å…³æ–‡æ¡£å’Œç¤ºä¾‹

## âœ… å®ŒæˆçŠ¶æ€

- [x] ç§»åŠ¨è·¯ç”±è£…é¥°å™¨
- [x] ç§»åŠ¨æ–‡æ¡£ç”Ÿæˆå™¨
- [x] ç§»åŠ¨APIä¸­é—´ä»¶
- [x] ç§»åŠ¨æ§åˆ¶å™¨åŸºç±»
- [x] æ›´æ–°å¯¼å…¥è·¯å¾„
- [x] åˆ é™¤æ—§æ–‡ä»¶
- [x] åˆ›å»ºæ–°çš„__init__.pyæ–‡ä»¶

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™æ¬¡é‡ç»„ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

1. **æ›´æ¸…æ™°çš„æ¶æ„**: æ ¸å¿ƒåŠŸèƒ½ä¸åº”ç”¨å±‚åˆ†ç¦»
2. **æ›´å¥½çš„å¯ç»´æŠ¤æ€§**: ç›¸å…³åŠŸèƒ½é›†ä¸­ç®¡ç†
3. **æ›´æ˜“æ‰©å±•**: æ ¸å¿ƒåŠŸèƒ½å¯ç‹¬ç«‹å‡çº§
4. **æ›´ç¬¦åˆæœ€ä½³å®è·µ**: éµå¾ªæ¡†æ¶è®¾è®¡åŸåˆ™

è¿™æ ·çš„æ¶æ„æ›´æœ‰åˆ©äºé•¿æœŸç»´æŠ¤å’ŒåŠŸèƒ½æ‰©å±•ï¼